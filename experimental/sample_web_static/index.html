<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>IREE Static Web Sample</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body style="background-color: #0d0f15; color: #ABB2BF">
  <h1>IREE Static Web Sample</h1>

  <script>
    var Module = {
      print: function (text) {
        console.log(text);
      },
      printErr: function (text) {
        console.error(text);
      },
      onRuntimeInitialized: function () {
        console.log("wasm module onRuntimeInitialized");
        testLoadedModule();
      },
      // https://emscripten.org/docs/api_reference/module.html#Module.noInitialRun
      noInitialRun: true,
    };

    // going to want to run the invocation off worker
    // so may need some web worker boilerplate


  function testLoadedModule() {
    setupSample = Module.cwrap("setup_sample", "number", []);
    cleanupSample = Module.cwrap("cleanup_sample", null, ["number"]);
    runSample = Module.cwrap("run_sample", null, ["number"]);

    state = setupSample();
    runSample(state);
    cleanupSample(state);
  };

  </script>
  <script src="sample-web-static-sync.js"></script>
  <!-- <script src="sample-web-static-multithreaded.js"></script> -->
</body>

</html>
